<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.jquery.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.css">

{{!-- Apply chosen to all dropdowns in class --}}
<script type="text/javascript">
$(function() {
    $(".chzn-select").chosen();
});
</script>

<h1>Users</h1>
<p1>Use this page to add, update, and deactivate users. <br> Deactivating a user will will deactivate any matches that user was in.</p1>

{{!-- Create a table --}}
<table class="styled-table" id="users-table">

    {{!-- Header section --}}
    <thead>

        {{!-- For just the first row, we print each key of the row object as a header cell so we
        know what each column means when the page renders --}}
        <tr>
            {{#each data.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
            <th>Deactivate</th>
        </tr>
    </thead>

    {{!-- Body section --}}
    <tbody>

        {{!-- For each row, print the id, fname, lname, homeworld and age, in order --}}
        {{#each data}}
        <tr data-value="{{this.user_id}}">
            <td>{{this.user_id}}</td>
            <td>{{this.username}}</td>
            <td>{{this.phone}}</td>
            <td>{{this.email}}</td>
            <td>{{this.birthdate}}</td>
            <td>{{this.home_type}}</td>
            <td>{{this.street_address}}</td>
            <td>{{this.city}}</td>
            <td>{{this.postal_code}}</td>
            <td>{{this.state}}</td>
            <td>{{this.activity_preference}}</td>
            <td>{{this.shedding_preference}}</td>
            <td>{{this.training_preference}}</td>
            <td>{{this.size_preference}}</td>
            <td>{{this.has_children}}</td>
            <td>{{this.has_dog}}</td>
            <td>{{this.has_cat}}</td>
            <td>{{this.is_active}}</td>
            <td><button onclick="deleteUser({{this.user_id}})">Deactivate</button></td>
        </tr>
        {{/each}}
    </tbody>
</table>

<script src="./js/delete_user.js"></script>

{{!-- Form to add a record to the table  --}}
<h2>Adding Users with AJAX</h2>
<p>To add a new user, please enter their information below and click 'Submit'!</p>
<form id="add-user">
    <label for="input-username">Username: </label>
    <input type="text" name="input-username" id="input-username" required>

    <label for="input-phone">Phone: </label>
    <input type="text" name="input-phone" id="input-phone" required>

    <label for="input-email">Email: </label>
    <input type="text" name="input-email" id="input-email" required>

    <label for="input-birthdate">Birthdate: </label>
    <input type="date" name="input-birthdate" id="input-birthdate" required>

    <label for="input-home_type">Closest Home Type: </label>
    <select name="input-home_type" id="input-home_type">
        <option value="NULL">Select</option>
        <option value="House">House</option>
        <option value="Duplex">Duplex</option>
        <option value="Apartment">Apartment</option>
    </select>
    <div></div>
    <label for="input-street_address">Street Address: </label>
    <input type="text" name="input-street_address" id="input-street_address" required>

    <label for="input-city">City: </label>
    <input type="text" name="input-city" id="input-city" required>

    <label for="input-postal_code">Postal/Zip Code: </label>
    <input type="text" name="input-postal_code" id="input-postal_code" required>

    <label for="input-state">Choose a State: </label>
    <select  class="chzn-select" name="input-state" id="input-state" required>
        <option value="NULL">Select</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="DE">Delaware</option>
        <option value="DC">District Of Columbia</option>
        <option value="FL">Florida</option>
        <option value="GA">Georgia</option>
        <option value="HI">Hawaii</option>
        <option value="ID">Idaho</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="IA">Iowa</option>
        <option value="KS">Kansas</option>
        <option value="KY">Kentucky</option>
        <option value="LA">Louisiana</option>
        <option value="ME">Maine</option>
        <option value="MD">Maryland</option>
        <option value="MA">Massachusetts</option>
        <option value="MI">Michigan</option>
        <option value="MN">Minnesota</option>
        <option value="MS">Mississippi</option>
        <option value="MO">Missouri</option>
        <option value="MT">Montana</option>
        <option value="NE">Nebraska</option>
        <option value="NV">Nevada</option>
        <option value="NH">New Hampshire</option>
        <option value="NJ">New Jersey</option>
        <option value="NM">New Mexico</option>
        <option value="NY">New York</option>
        <option value="NC">North Carolina</option>
        <option value="ND">North Dakota</option>
        <option value="OH">Ohio</option>
        <option value="OK">Oklahoma</option>
        <option value="OR">Oregon</option>
        <option value="PA">Pennsylvania</option>
        <option value="RI">Rhode Island</option>
        <option value="SC">South Carolina</option>
        <option value="SD">South Dakota</option>
        <option value="TN">Tennessee</option>
        <option value="TX">Texas</option>
        <option value="UT">Utah</option>
        <option value="VT">Vermont</option>
        <option value="VA">Virginia</option>
        <option value="WA">Washington</option>
        <option value="WV">West Virginia</option>
        <option value="WI">Wisconsin</option>
        <option value="WY">Wyoming</option>
    </select>
    <div></div>
    <label for="input-activity_preference">Activity Preference: </label>
    <input type="number" name="input-activity_preference" id="input-activity_preference" min="1" max="10">

    <label for="input-shedding_preference">Shedding Preference: </label>
    <input type="number" name="input-shedding_preference" id="input-shedding_preference" min="1" max="10">

    <label for="input-training_preference">Training Preference: </label>
    <input type="number" name="input-training_preference" id="input-training_preference" min="1" max="10">

    <label for="input-size_preference">Size Preference: </label>
    <select name="input-size_preference" id="input-size_preference">
        <option value="NULL">Select</option>
        <option value="Small">Small</option>
        <option value="Medium">Medium</option>
        <option value="Large">Large</option>
    </select><div></div>

    <label for="input-has_children">Will the dog be around children? </label>
    <select name="input-has_children" id="input-has_children">
        <option value="NULL">Select</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select><div></div>

    <label for="input-has_dog">Will you have other dogs in your home? </label>
    <select name="input-has_dog" id="input-has_dog">
        <option value="NULL">Select</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select><div></div>

    <label for="input-has_cat">Will you have a cat in your home? </label>
    <select name="input-has_cat" id="input-has_cat">
        <option value="NULL">Select</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select><div></div>

    <input type="hidden" name="input-is_active" id="input-is_active" value="1" />

    <input type="submit">
</form>

{{!-- Embed our javascript to handle the DOM manipulation and AJAX request --}}
<script src="./js/add_user.js"></script>




<h2>Updating A User with AJAX</h2>
<p>To update a specific user select their username from the drop-down menu on the left</p>
<form id="update-user">

    <label for="select-username">Current Username: </label>
    <select name="select-username" id="select-username">
        <option value="test">Select a User</option>
        {{#each data}}
        <option value="{{this.user_id}}">{{this.username}}</option>
        {{/each}}
    </select>
    <div></div>
    <label for="update-username">Username: </label>
    <input type="text" name="update-username" id="update-username" required>

    <label for="update-phone">Phone: </label>
    <input type="text" name="update-phone" id="update-phone" required>

    <label for="update-email">Email: </label>
    <input type="text" name="update-email" id="update-email" required>

    <label for="update-birthdate">Birthdate: </label>
    <input type="date" name="update-birthdate" id="update-birthdate" required>

    <label for="update-home_type">Closest Home Type: </label>
    <select name="update-home_type" id="update-home_type">
        <option value="NULL">Select</option>
        <option value="House">House</option>
        <option value="Duplex">Duplex</option>
        <option value="Apartment">Apartment</option>
    </select>
    <div></div>
    <label for="update-street_address">Street Address: </label>
    <input type="text" name="update-street_address" id="update-street_address" required>

    <label for="update-city">City: </label>
    <input type="text" name="update-city" id="update-city" required>

    <label for="update-postal_code">Postal/Zip Code: </label>
    <input type="text" name="update-postal_code" id="update-postal_code" required>

    <label for="update-state">Choose a State: </label>
    <select  class="chzn-select" name="update-state" id="update-state" required>
        <option value="NULL">Select</option>
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="DE">Delaware</option>
        <option value="DC">District Of Columbia</option>
        <option value="FL">Florida</option>
        <option value="GA">Georgia</option>
        <option value="HI">Hawaii</option>
        <option value="ID">Idaho</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="IA">Iowa</option>
        <option value="KS">Kansas</option>
        <option value="KY">Kentucky</option>
        <option value="LA">Louisiana</option>
        <option value="ME">Maine</option>
        <option value="MD">Maryland</option>
        <option value="MA">Massachusetts</option>
        <option value="MI">Michigan</option>
        <option value="MN">Minnesota</option>
        <option value="MS">Mississippi</option>
        <option value="MO">Missouri</option>
        <option value="MT">Montana</option>
        <option value="NE">Nebraska</option>
        <option value="NV">Nevada</option>
        <option value="NH">New Hampshire</option>
        <option value="NJ">New Jersey</option>
        <option value="NM">New Mexico</option>
        <option value="NY">New York</option>
        <option value="NC">North Carolina</option>
        <option value="ND">North Dakota</option>
        <option value="OH">Ohio</option>
        <option value="OK">Oklahoma</option>
        <option value="OR">Oregon</option>
        <option value="PA">Pennsylvania</option>
        <option value="RI">Rhode Island</option>
        <option value="SC">South Carolina</option>
        <option value="SD">South Dakota</option>
        <option value="TN">Tennessee</option>
        <option value="TX">Texas</option>
        <option value="UT">Utah</option>
        <option value="VT">Vermont</option>
        <option value="VA">Virginia</option>
        <option value="WA">Washington</option>
        <option value="WV">West Virginia</option>
        <option value="WI">Wisconsin</option>
        <option value="WY">Wyoming</option>
    </select>
    <div></div>
    <label for="update-activity_preference">Activity Preference: </label>
    <input type="number" name="update-activity_preference" id="update-activity_preference" min="1" max="10">

    <label for="update-shedding_preference">Shedding Preference: </label>
    <input type="number" name="update-shedding_preference" id="update-shedding_preference" min="1" max="10">

    <label for="update-training_preference">Training Preference: </label>
    <input type="number" name="update-training_preference" id="update-training_preference" min="1" max="10">

    <label for="update-size_preference">Size Preference: </label>
    <select name="update-size_preference" id="update-size_preference">
        <option value="NULL">Select</option>
        <option value="Small">Small</option>
        <option value="Medium">Medium</option>
        <option value="Large">Large</option>
    </select><div></div>

    <label for="update-has_children">Will the dog be around children? </label>
    <select name="update-has_children" id="update-has_children">
        <option value="NULL">Select</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select><div></div>

    <label for="update-has_dog">Will you have other dogs in your home? </label>
    <select name="update-has_dog" id="update-has_dog">
        <option value="NULL">Select</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select><div></div>

    <label for="update-has_cat">Will you have a cat in your home? </label>
    <select name="update-has_cat" id="update-has_cat">
        <option value="NULL">Select</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select><div></div>

    <input type="hidden" name="update-is_active" id="update-is_active" value="1" />

    <input type="submit">

</form>

<script src="./js/update_user.js"></script>
